<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Scraper Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Antigravity Scraper</h2>
            <nav>
                <ul>
                    <li id="link-stats" class="active">General Stats</li>
                    <li id="link-videos">See All Videos</li>
                    <li id="link-export">Export Data</li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main id="content-area">

            <!-- STATS TAB -->
            <div id="tab-stats" class="tab-content">
                <h1>Overview</h1>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Videos</h3>
                        <p id="stat-total-videos">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Unique Users</h3>
                        <p id="stat-total-users">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Last Active</h3>
                        <p id="stat-last-active">-</p>
                    </div>
                </div>
            </div>

            <!-- VIDEOS TAB -->
            <div id="tab-videos" class="tab-content" style="display:none;">
                <div class="header-row">
                    <h1>All Videos</h1>
                    <div class="filters">
                        <select id="filter-platform" class="filter-select">
                            <option value="ALL">All Platforms</option>
                            <option value="TikTok">TikTok</option>
                            <option value="Facebook">Facebook</option>
                            <option value="Instagram">Instagram</option>
                        </select>
                        <select id="filter-user" class="filter-select">
                            <option value="ALL">All Users</option>
                            <!-- Users injected by JS -->
                        </select>
                    </div>
                </div>
                <div id="video-grid" class="video-grid">
                    <!-- Cards injected here -->
                </div>
            </div>

            <!-- EXPORT TAB -->
            <div id="tab-export" class="tab-content" style="display:none;">
                <div class="header-section">
                    <h1>Export Data</h1>
                    <p>Customize and download your scraped video records.</p>
                </div>

                <div class="export-grid">
                    <!-- Card 1: Global Filters -->
                    <div class="modern-card">
                        <div class="card-header">
                            <h3>Global Filters</h3>
                        </div>
                        <div class="card-body">
                            <div class="filter-flex">
                                <div class="filter-group">
                                    <label>Platform</label>
                                    <select id="export-platform" class="modern-select">
                                        <option value="ALL">All Platforms</option>
                                        <option value="TikTok">TikTok</option>
                                        <option value="Facebook">Facebook</option>
                                        <option value="Instagram">Instagram</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label>User</label>
                                    <select id="export-user" class="modern-select">
                                        <option value="ALL">All Users</option>
                                    </select>
                                </div>
                            </div>
                            <div class="toggle-row">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="export-new-only">
                                    <span class="slider"></span>
                                </label>
                                <span>Export only new items (incremental)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: Data Columns (CSV) -->
                    <div class="modern-card">
                        <div class="card-header">
                            <h3>Data Columns (CSV)</h3>
                        </div>
                        <div class="card-body">
                            <div class="pills-container" id="column-pills">
                                <!-- Pills -->
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="originalUrl" checked>
                                    <span class="pill-label">Video URL</span>
                                </label>
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="scrapedAt" checked>
                                    <span class="pill-label">Date Scraped</span>
                                </label>
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="userId" checked>
                                    <span class="pill-label">Username</span>
                                </label>
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="platform" checked>
                                    <span class="pill-label">Platform</span>
                                </label>
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="videoId" checked>
                                    <span class="pill-label">Video ID</span>
                                </label>
                                <label class="pill-checkbox">
                                    <input type="checkbox" value="thumbnailUrl">
                                    <span class="pill-label">Thumbnail URL</span>
                                </label>
                            </div>

                            <div class="action-buttons">
                                <button id="btn-export-csv" class="btn-primary-large">
                                    <span class="icon">â¬‡</span> Export Data (CSV)
                                </button>
                                <button id="btn-export-txt" class="btn-secondary-outline">
                                    <span class="icon">ðŸ“„</span> Download TXT List
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3: Live Preview -->
                    <div class="modern-card">
                        <div class="card-header">
                            <h3>Live Preview (3 rows)</h3>
                        </div>
                        <div class="card-body table-wrapper">
                            <table id="preview-table" class="modern-table">
                                <thead>
                                    <!-- Headers (Dynamic) -->
                                </thead>
                                <tbody>
                                    <!-- Rows (Dynamic) -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <script src="../utils/storage.js"></script>
    <script type="module" src="dashboard.js"></script>
</body>

</html>